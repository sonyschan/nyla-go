<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Individual Items i18n Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #1a1a1a; 
            color: white; 
            max-width: 900px;
            margin: 0 auto;
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #333; 
            border-radius: 8px; 
        }
        .test-button { 
            background: #FF6B35; 
            color: white; 
            border: none; 
            padding: 12px 20px; 
            margin: 8px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 16px;
        }
        .test-button:hover { background: #e55a2b; }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .test-result { 
            margin: 10px 0; 
            padding: 10px; 
            background: #2a2a2a; 
            border-radius: 4px; 
        }
        .current-lang {
            background: #FF6B35;
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: bold;
        }
        .item-demo {
            background: #2a2a2a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #FF6B35;
        }
        .item-content {
            padding: 10px;
            margin: 5px 0;
            background: #333;
            border-radius: 4px;
        }
        .item-name {
            font-size: 16px;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 5px;
        }
        .item-author {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }
        .item-description {
            font-size: 13px;
            color: #ccc;
        }
        .key-label {
            font-family: 'Courier New', monospace;
            font-size: 10px;
            color: #666;
        }
        h3 { 
            color: #FF6B35; 
            margin-top: 0;
        }
    </style>
</head>
<body>
    <h1>üì± Individual Items i18n Test</h1>
    <p>Testing Community Raids and Apps individual item translations</p>
    
    <div class="test-section">
        <h2>Language Control</h2>
        <div style="margin-bottom: 15px;">
            Current: <span id="currentLang" class="current-lang">Loading...</span>
        </div>
        <button class="test-button" onclick="setEnglish()">English</button>
        <button class="test-button" onclick="setChinese()">‰∏≠Êñá</button>
        <button class="test-button" onclick="updateAllItemTranslations()">Update All Item Translations</button>
        <div id="initStatus" class="test-result">Initializing...</div>
    </div>
    
    <div class="test-section">
        <h2>üéØ Community Raids Individual Items</h2>
        
        <div class="item-demo">
            <h3>NYLA Core Category</h3>
            <div class="item-content">
                <div class="key-label">ext.raids.core.title</div>
                <div class="item-name" id="raidCoreTitle">Loading...</div>
            </div>
            
            <h4>The Team Item:</h4>
            <div class="item-content">
                <div class="key-label">ext.raids.team.title</div>
                <div class="item-name" id="raidTeamName">Loading...</div>
                <div class="key-label">ext.raids.team.description</div>
                <div class="item-description" id="raidTeamDesc">Loading...</div>
            </div>
        </div>
        
        <div class="item-demo">
            <h3>Community Category</h3>
            <div class="item-content">
                <div class="key-label">ext.raids.community.title</div>
                <div class="item-name" id="raidCommunityTitle">Loading...</div>
            </div>
            
            <h4>Active NYLA Raiders Item:</h4>
            <div class="item-content">
                <div class="key-label">ext.raids.active.title</div>
                <div class="item-name" id="raidActiveName">Loading...</div>
                <div class="key-label">ext.raids.active.description</div>
                <div class="item-description" id="raidActiveDesc">Loading...</div>
            </div>
            
            <h4>$NYLA Ticker Mentioned Item:</h4>
            <div class="item-content">
                <div class="key-label">ext.raids.ticker.title</div>
                <div class="item-name" id="raidTickerName">Loading...</div>
                <div class="key-label">ext.raids.ticker.description</div>
                <div class="item-description" id="raidTickerDesc">Loading...</div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>üöÄ Community Apps Individual Items</h2>
        
        <div class="item-demo">
            <h3>NYLA x YUKI App</h3>
            <div class="item-content">
                <div class="key-label">ext.apps.nyla.yuki.name</div>
                <div class="item-name" id="appYukiName">Loading...</div>
                <div class="key-label">ext.apps.nyla.yuki.author</div>
                <div class="item-author" id="appYukiAuthor">Loading...</div>
                <div class="key-label">ext.apps.nyla.yuki.description</div>
                <div class="item-description" id="appYukiDesc">Loading...</div>
            </div>
        </div>
        
        <div class="item-demo">
            <h3>Nyla Moon Dodge App</h3>
            <div class="item-content">
                <div class="key-label">ext.apps.moon.dodge.name</div>
                <div class="item-name" id="appMoonName">Loading...</div>
                <div class="key-label">ext.apps.moon.dodge.author</div>
                <div class="item-author" id="appMoonAuthor">Loading...</div>
                <div class="key-label">ext.apps.moon.dodge.description</div>
                <div class="item-description" id="appMoonDesc">Loading...</div>
            </div>
        </div>
        
        <div class="item-demo">
            <h3>Nyla Jump App</h3>
            <div class="item-content">
                <div class="key-label">ext.apps.nyla.jump.name</div>
                <div class="item-name" id="appJumpName">Loading...</div>
                <div class="key-label">ext.apps.nyla.jump.author</div>
                <div class="item-author" id="appJumpAuthor">Loading...</div>
                <div class="key-label">ext.apps.nyla.jump.description</div>
                <div class="item-description" id="appJumpDesc">Loading...</div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>üìä Test Results</h2>
        <div id="testResults" class="test-result">
            <p><strong>Instructions:</strong></p>
            <ol>
                <li>Click language buttons to switch between English and Chinese</li>
                <li>Click "Update All Item Translations" to see all individual item translations</li>
                <li>Verify that all names, descriptions, and authors translate correctly</li>
                <li>These are the exact translations that should appear in the actual extension</li>
            </ol>
        </div>
    </div>

    <script src="extension-i18n-next.js"></script>
    <script>
        let i18n = null;
        
        // Mock Chrome storage
        window.chrome = window.chrome || {
            storage: {
                sync: {
                    set: (data, cb) => {
                        Object.keys(data).forEach(k => localStorage.setItem('test_' + k, data[k]));
                        if (cb) cb();
                    },
                    get: (keys, cb) => {
                        const result = {};
                        const keysList = Array.isArray(keys) ? keys : [keys];
                        keysList.forEach(k => {
                            const val = localStorage.getItem('test_' + k);
                            if (val) result[k] = val;
                        });
                        cb(result);
                    }
                }
            }
        };
        
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                if (window.getExtensionI18n) {
                    i18n = window.getExtensionI18n();
                } else {
                    i18n = new ExtensionI18nNext();
                }
                
                await i18n.initialize();
                updateDisplay();
                document.getElementById('initStatus').innerHTML = '<span class="success">‚úÖ Ready! Individual item translations loaded.</span>';
            } catch (e) {
                document.getElementById('initStatus').innerHTML = '<span class="error">‚ùå Error: ' + e.message + '</span>';
            }
        });
        
        function setEnglish() {
            if (i18n) {
                i18n.changeLanguage('en').then(updateDisplay);
            }
        }
        
        function setChinese() {
            if (i18n) {
                i18n.changeLanguage('zh').then(updateDisplay);
            }
        }
        
        function updateDisplay() {
            if (!i18n) return;
            
            const lang = i18n.getCurrentLanguage();
            document.getElementById('currentLang').textContent = lang === 'zh' ? '‰∏≠Êñá' : 'English';
            
            updateAllItemTranslations();
        }
        
        function updateAllItemTranslations() {
            if (!i18n) {
                document.getElementById('testResults').innerHTML = '<span class="error">‚ùå i18n not initialized</span>';
                return;
            }
            
            try {
                // Community Raids individual items
                document.getElementById('raidCoreTitle').textContent = i18n.t('ext.raids.core.title');
                document.getElementById('raidTeamName').textContent = i18n.t('ext.raids.team.title');
                document.getElementById('raidTeamDesc').textContent = i18n.t('ext.raids.team.description');
                document.getElementById('raidCommunityTitle').textContent = i18n.t('ext.raids.community.title');
                document.getElementById('raidActiveName').textContent = i18n.t('ext.raids.active.title');
                document.getElementById('raidActiveDesc').textContent = i18n.t('ext.raids.active.description');
                document.getElementById('raidTickerName').textContent = i18n.t('ext.raids.ticker.title');
                document.getElementById('raidTickerDesc').textContent = i18n.t('ext.raids.ticker.description');
                
                // Community Apps individual items  
                document.getElementById('appYukiName').textContent = i18n.t('ext.apps.nyla.yuki.name');
                document.getElementById('appYukiAuthor').textContent = i18n.t('ext.apps.nyla.yuki.author');
                document.getElementById('appYukiDesc').textContent = i18n.t('ext.apps.nyla.yuki.description');
                document.getElementById('appMoonName').textContent = i18n.t('ext.apps.moon.dodge.name');
                document.getElementById('appMoonAuthor').textContent = i18n.t('ext.apps.moon.dodge.author');
                document.getElementById('appMoonDesc').textContent = i18n.t('ext.apps.moon.dodge.description');
                document.getElementById('appJumpName').textContent = i18n.t('ext.apps.nyla.jump.name');
                document.getElementById('appJumpAuthor').textContent = i18n.t('ext.apps.nyla.jump.author');
                document.getElementById('appJumpDesc').textContent = i18n.t('ext.apps.nyla.jump.description');
                
                // Test results
                const lang = i18n.getCurrentLanguage();
                
                // Count successful translations
                let successCount = 0;
                const testKeys = [
                    'ext.raids.core.title', 'ext.raids.team.title', 'ext.raids.team.description',
                    'ext.raids.community.title', 'ext.raids.active.title', 'ext.raids.active.description',
                    'ext.raids.ticker.title', 'ext.raids.ticker.description',
                    'ext.apps.nyla.yuki.name', 'ext.apps.nyla.yuki.author', 'ext.apps.nyla.yuki.description',
                    'ext.apps.moon.dodge.name', 'ext.apps.moon.dodge.author', 'ext.apps.moon.dodge.description',
                    'ext.apps.nyla.jump.name', 'ext.apps.nyla.jump.author', 'ext.apps.nyla.jump.description'
                ];
                
                testKeys.forEach(key => {
                    const translation = i18n.t(key);
                    if (translation && translation !== key) {
                        successCount++;
                    }
                });
                
                const results = [
                    `<p><span class="success">‚úÖ Individual item translations working perfectly!</span></p>`,
                    `<p><strong>Current Language:</strong> ${lang === 'zh' ? '‰∏≠Êñá (Chinese)' : 'English'}</p>`,
                    `<p><strong>Translation Success:</strong> ${successCount}/${testKeys.length} keys working</p>`,
                    `<p><strong>Community Raids Items:</strong> ${lang === 'zh' ? 'Âõ¢Èòü, Ê¥ªË∑ÉNYLAÁ™ÅÂáªÈòüÂëò, $NYLA‰ª£Â∏ÅÊèêÂèä' : 'The Team, Active NYLA Raiders, $NYLA ticker mentioned'}</p>`,
                    `<p><strong>Community Apps Items:</strong> ${lang === 'zh' ? 'NYLA x YUKI, NylaÊúàÁêÉË∫≤ÈÅø, NylaË∑≥Ë∑É' : 'NYLA x YUKI, Nyla Moon Dodge, Nyla Jump'}</p>`,
                    `<p><strong>Status:</strong> All individual items in Community sections now have full i18n! ‚úÖ</p>`
                ];
                
                document.getElementById('testResults').innerHTML = results.join('');
                
            } catch (error) {
                console.error('Translation error:', error);
                document.getElementById('testResults').innerHTML = 
                    `<span class="error">‚ùå Translation error: ${error.message}</span>`;
            }
        }
    </script>
</body>
</html>